<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Console Printing • GiottoUtils</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Console Printing">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GiottoUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/print_formatting.html">Console Printing</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://drieslab.github.io/Giotto/">Suite</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/drieslab/GiottoUtils/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Console Printing</h1>
            
            <h4 data-toc-skip class="date">4 November 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/drieslab/Giotto/blob/website/vignettes/print_formatting.Rmd" class="external-link"><code>vignettes/print_formatting.Rmd</code></a></small>
      <div class="d-none name"><code>print_formatting.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="relevant-options">Relevant Options<a class="anchor" aria-label="anchor" href="#relevant-options"></a>
</h2>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"giotto.verbose"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"giotto.logdir"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"giotto.last_logpath"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Diagnostic prints in R are vital for communicating to both users and developers what the function is doing and how it may be going wrong. <em>GiottoUtils</em> exports a collection of utility functions that facilitate pretty printing and readability.</p>
<p>There are several types of console printouts in R. Giotto uses the following types of functions for specific purposes:<br>
- <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> - Descriptive messages of what a function is doing (most common)<br>
- <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code> and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> - Diagnostic outputs, usually comments and previews of the data<br>
- <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> - When a function behavior is potentially problematic, given the context and/or inputs<br>
- <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> - Error messages</p>
</div>
<div class="section level2">
<h2 id="text-formatting">Text Formatting<a class="anchor" aria-label="anchor" href="#text-formatting"></a>
</h2>
<p><code><a href="../reference/wrap_txt.html">GiottoUtils::wrap_txt()</a></code> can be used to format text to wrap to to console size or 100 char by default - whichever is less. New lines are treated like “\n” and it also applies an indent to all lines after the first.<br>
This function is wrapped by the convenient print functions detailed below.<br></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://drieslab.github.io/Giotto/" class="external-link">GiottoUtils</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/wrap_txt.html">wrap_txt</a></span><span class="op">(</span><span class="st">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></span>
<span><span class="st">             Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor</span></span>
<span><span class="co">##  incididunt ut labore et dolore magna aliqua.</span></span>
<span><span class="co">##  Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut</span></span>
<span><span class="co">##  aliquip ex ea commodo consequat.</span></span></code></pre>
<p>You can also use sprintf formatting using <code>wrap_txtf</code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wrap_txt.html">wrap_txtf</a></span><span class="op">(</span><span class="st">"%s morning"</span>, <span class="st">"good"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "good morning"</span></span></code></pre>
<details><p><summary>See base behavior</summary> Base functions for console prints lack text wrapping. Linebreaks also require usage of “\n” to be formatted as expected.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Code formatting causes "    " to be added the next line</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></span>
<span><span class="st">    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></span>
<span><span class="co">##     Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using \n instead</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\nUt enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></span>
<span><span class="co">## Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</span></span></code></pre>
</details>
</div>
<div class="section level2">
<h2 id="messages">Messages<a class="anchor" aria-label="anchor" href="#messages"></a>
</h2>
<p>Giotto primarily uses messages to write helpful console prints. Whenever a function has a message print, we also encourage adding a <code>verbose</code> param so that it can be turned off. The standard implementation looks like this.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_fun1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">verbose</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">verbose</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"hello world"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">test_fun1</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## hello world</span></span></code></pre>
<p><em>GiottoUtils</em> v0.1.1 introduces <code><a href="../reference/vmsg.html">vmsg()</a></code> which simplifies this to a single function without a preceding <code>if</code> statement. It also applies text wrapping. Note that the <code>verbose</code> default should be <code>NULL</code> with this implementation since <code><a href="../reference/vmsg.html">vmsg()</a></code> checks for a default using the <code>"giotto.verbose"</code> option that can be set globally.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_fun2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">verbose</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/vmsg.html">vmsg</a></span><span class="op">(</span>.v <span class="op">=</span> <span class="va">verbose</span>, <span class="st">"hello world"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">test_fun2</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## hello world</span></span></code></pre>
<div class="section level3">
<h3 id="debug-messages">Debug messages<a class="anchor" aria-label="anchor" href="#debug-messages"></a>
</h3>
<p><code><a href="../reference/vmsg.html">vmsg()</a></code> also provides other modes of prints. For debugging purposes, it can be helpful to include more abstract or wordy printouts such as messages for every successful step. These can be included by flagging as <code>"debug"</code></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_debug</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">verbose</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/vmsg.html">vmsg</a></span><span class="op">(</span>.v <span class="op">=</span> <span class="va">verbose</span>, .is_debug <span class="op">=</span> <span class="cn">TRUE</span>, <span class="st">"this is a debug statement"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/vmsg.html">vmsg</a></span><span class="op">(</span>.v <span class="op">=</span> <span class="va">verbose</span>, <span class="st">"this is a normal message"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">test_debug</span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## this is a normal message</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">test_debug</span><span class="op">(</span>verbose <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## this is a debug statement</span></span>
<span><span class="co">## this is a normal message</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="logging-messages">Logging messages<a class="anchor" aria-label="anchor" href="#logging-messages"></a>
</h3>
<p>For cases where a record of the messages would be helpful, but it would be preferred that nothing is actually printed to the console, <code><a href="../reference/vmsg.html">vmsg()</a></code> also supports writing to a logfile. This can be done by passing either <code>"log"</code> or <code>"log_debug"</code> for the desired level of verbosity to the <code>verbose</code> param or <code>"giotto.verbose"</code> option.<br>
The logfile defaults to being created in <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>, but this can be set to a directory of choice using the <code>"giotto.logdir"</code> option. The specific path to the logfile is stored within the <code>"giotto.last_logpath"</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vmsg.html">vmsg</a></span><span class="op">(</span>.v <span class="op">=</span> <span class="st">"log"</span>, <span class="st">"Write this to a logfile in tempdir"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Logging to:/tmp/RtmpVyfvxY/giotto_20241104_1.txt</span></span></code></pre>
<p>To read the log items, use <code><a href="../reference/giottoReadLog.html">giottoReadLog()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/giottoReadLog.html">giottoReadLog</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] " (2024-11-04 17:47:46) Write this to a logfile in tempdir"</span></span></code></pre>
<p>You can start a new logfile using <code><a href="../reference/giottoNewLog.html">giottoNewLog()</a></code></p>
</div>
</div>
<div class="section level2">
<h2 id="errors">Errors<a class="anchor" aria-label="anchor" href="#errors"></a>
</h2>
<p>With the modularization of <em>Giotto</em> in v4.0.0, it can be hard to find which module a specific error came from. <code>.gstop()</code> is an error handling internal function within each of the modules that seeks to solve this. This function will pre-pend which module the error happened in. It also provides the <code>.n</code> param that allows developers to specify how many stackframes back the error should be reported from.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">GiottoUtils</span><span class="fu">:::</span><span class="fu">.gstop</span><span class="op">(</span><span class="st">"This is an error."</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">foo</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">bar</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: [GiottoUtils] foo(1, 2):</span></span>
<span><span class="co">##  This is an error.</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">GiottoUtils</span><span class="fu">:::</span><span class="fu">.gstop</span><span class="op">(</span><span class="st">"This is an error."</span>, .n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># report from one stackframe back</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">bar</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: [GiottoUtils] bar():</span></span>
<span><span class="co">##  This is an error.</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.4.2 (2024-10-31)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.5 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] GiottoUtils_0.2.1 BiocStyle_2.34.0 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] cli_3.6.3           knitr_1.48          rlang_1.1.4        </span></span>
<span><span class="co">##  [4] xfun_0.49           textshaping_0.4.0   data.table_1.16.2  </span></span>
<span><span class="co">##  [7] gtools_3.9.5        jsonlite_1.8.9      backports_1.5.0    </span></span>
<span><span class="co">## [10] htmltools_0.5.8.1   ragg_1.3.3          sass_0.4.9         </span></span>
<span><span class="co">## [13] rmarkdown_2.28      evaluate_1.0.1      jquerylib_0.1.4    </span></span>
<span><span class="co">## [16] fastmap_1.2.0       yaml_2.3.10         lifecycle_1.0.4    </span></span>
<span><span class="co">## [19] bookdown_0.41       BiocManager_1.30.25 compiler_4.4.2     </span></span>
<span><span class="co">## [22] fs_1.6.5            systemfonts_1.1.0   digest_0.6.37      </span></span>
<span><span class="co">## [25] R6_2.5.1            parallel_4.4.2      magrittr_2.0.3     </span></span>
<span><span class="co">## [28] bslib_0.8.0         checkmate_2.3.2     tools_4.4.2        </span></span>
<span><span class="co">## [31] pkgdown_2.1.1       cachem_1.1.0        desc_1.4.3</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.drieslab.com" class="external-link">Ruben Dries</a>, Jiaji George Chen, <a href="https://josschavezf.github.io" class="external-link">Joselyn C. Chávez-Fuentes</a>, <a href="https://labs.icahn.mssm.edu/yuanlab/" class="external-link">Guo-Cheng Yuan</a>, Matthew O’Brien, Edward Ruiz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
